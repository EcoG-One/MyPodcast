{% extends "base.html" %}
{% block title %}Your Podcast{% endblock %}
{% block content %}

{% with messages = get_flashed_messages()%}
{% if messages%}
    {% for message in messages%}
    <p>{{message}}</p>
    {%endfor%}
    {%endif%}
    {%endwith%}
<h2 class="text-white font-weight-light mb-2 display-4">Listen to Your Podcast:</h2>
<div class="player">
    <audio id="myPodcast" controls autoplay style="max-width: 100%">
      <source src="{{ url_for('static', filename= audio_file) }}" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
</div>
<div id="audioMessage" style="display:none; color:green; margin-top:10px;">
  Your Podcast has finished playing!
</div>
<script>
  const audio = document.getElementById('myPodcast');
  const messageDiv = document.getElementById('audioMessage');
  audio.addEventListener('ended', function() {
    messageDiv.style.display = 'block';
    // Optionally, update the text:
    // messageDiv.textContent = 'Your custom message here!';
  });
</script>
{% endblock %}
